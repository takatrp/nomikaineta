# Create the HTML file for the drinking party random topic app
content = r"""<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>飲み会ネタ・ランダム表示</title>
<style>
  :root{
    --bg:#0f172a;       /* slate-900 */
    --card:#111827;     /* gray-900 */
    --ink:#e5e7eb;      /* gray-200 */
    --muted:#94a3b8;    /* slate-400 */
    --accent:#3b82f6;   /* blue-500 */
    --accent-2:#60a5fa; /* blue-400 */
    --ok:#22c55e;       /* green-500 */
    --warn:#f59e0b;     /* amber-500 */
  }
  html,body{height:100%;}
  body{
    margin:0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans JP", "Yu Gothic UI", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
    color:var(--ink);
    background: radial-gradient(1200px 800px at 30% -10%, #1f2937, transparent), var(--bg);
    letter-spacing: .02em;
  }
  .wrap{max-width:980px;margin:0 auto;padding:24px 16px 56px;}
  header h1{font-size: clamp(20px, 3vw, 28px); margin:0 0 4px;}
  header p{margin:6px 0 16px;color:var(--muted);font-size:14px}
  .panel{
    background: linear-gradient(180deg, rgba(59,130,246,.12), rgba(59,130,246,.05));
    border:1px solid rgba(59,130,246,.25);
    border-radius:14px;
    padding:14px;
    display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between;
  }
  .seg{
    display:inline-flex;border:1px solid rgba(148,163,184,.35);border-radius:999px;overflow:hidden;
  }
  .seg input{display:none}
  .seg label{
    padding:8px 14px;cursor:pointer;font-weight:600;color:var(--muted);user-select:none;
    background:transparent; transition:.2s ease;
  }
  .seg input:checked + label{background:var(--accent);color:white}
  .btns{display:flex;gap:10px;flex-wrap:wrap}
  button{
    appearance:none;border:none;cursor:pointer;
    background:var(--accent);color:white;border-radius:10px;
    padding:12px 16px;font-weight:700;font-size:16px;
    box-shadow: 0 8px 24px rgba(59,130,246,.25);
    transition: transform .04s ease, box-shadow .2s ease, opacity .2s ease;
  }
  button:active{transform: translateY(1px);}
  button.secondary{background:#1f2937;color:var(--ink);border:1px solid rgba(148,163,184,.35);box-shadow:none}
  button.ghost{background:transparent;color:var(--muted);border:1px dashed rgba(148,163,184,.35);box-shadow:none}
  .grid{display:grid;grid-template-columns:1fr;gap:14px;margin-top:16px}
  .card{
    background: linear-gradient(180deg, rgba(17,24,39,.9), rgba(15,23,42,.9));
    border:1px solid rgba(148,163,184,.2);
    border-radius:14px;padding:18px 16px;
  }
  .topic{font-size: clamp(22px, 5vw, 34px); font-weight:900; line-height:1.3; margin:4px 0 6px;
    text-shadow: 0 12px 28px rgba(0,0,0,.45);
    letter-spacing:.02em
  }
  .meta{display:flex;align-items:center;gap:10px;color:var(--muted);font-size:13px;margin-bottom:8px}
  .tag{
    display:inline-flex;align-items:center;gap:6px;
    background: rgba(59,130,246,.15); color:#bfdbfe; border:1px solid rgba(59,130,246,.35);
    border-radius:999px; padding:6px 10px; font-weight:700; font-size:12px;
  }
  ul.follow{margin:10px 0 0 20px;padding:0}
  ul.follow li{margin:6px 0;color:#dbeafe}
  details{background:transparent;border:1px solid rgba(148,163,184,.25);border-radius:12px;padding:10px 12px}
  details summary{cursor:pointer;color:var(--muted);font-weight:700}
  ol#history{margin-top:8px;padding-left:20px}
  .hint{color:var(--muted);font-size:12px}
  .toast{
    position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
    background:#0b1220;border:1px solid rgba(148,163,184,.3);color:#e2e8f0;
    padding:10px 14px;border-radius:10px;opacity:0;pointer-events:none; transition:opacity .25s ease;
  }
  .toast.show{opacity:1}
  .roll{animation: roll 600ms ease}
  @keyframes roll{
    0%{filter:blur(10px);opacity:.4;transform:scale(.98) translateY(6px)}
    100%{filter:blur(0);opacity:1;transform:scale(1) translateY(0)}
  }
  footer{margin-top:16px;color:var(--muted);font-size:12px}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>飲み会ネタ・ランダム表示</h1>
      <p>「次のネタ」を押すだけ。<span class="hint">実名・年収・政治/宗教・容姿いじりは避け、みんなが安心して笑える話題にしましょう。</span></p>
      <div class="panel">
        <div class="seg" role="tablist" aria-label="モード選択">
          <input type="radio" id="m-mixed" name="mode" value="mixed" checked><label for="m-mixed">男女混合</label>
          <input type="radio" id="m-men" name="mode" value="men"><label for="m-men">男性のみ</label>
        </div>
        <div class="btns">
          <button id="nextBtn" aria-label="次のネタ">🎲 次のネタ</button>
          <button id="copyBtn" class="secondary" aria-label="今のネタをコピー">📝 コピー</button>
          <button id="resetBtn" class="ghost" aria-label="リセット">🔁 シャッフル</button>
        </div>
      </div>
    </header>

    <section class="grid">
      <div class="card" aria-live="polite">
        <div class="meta"><span class="tag" id="modeTag">男女混合</span><span id="progress" class="hint"></span></div>
        <div id="topic" class="topic">ようこそ！「次のネタ」を押してスタート。</div>
        <ul id="followups" class="follow"></ul>
      </div>

      <details>
        <summary>履歴（この席で出したネタ）</summary>
        <ol id="history"></ol>
      </details>

      <footer>
        <div>© 2025 飲み会ネタジェネレーター｜安全第一。深酒・無理な煽りはNG。</div>
      </footer>
    </section>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>
  </div>

<script>
  // ====== データセット ======
  const DATA = {
    mixed: [
      "子どもの頃に好きだった給食・駄菓子は？",
      "最近いちばんハマってるドラマ/アニメ/YouTubeは？",
      "今年行って良かったお店ベスト1（ジャンル自由）",
      "旅行の“笑える失敗談”（本人が話してOKな範囲で）",
      "地元だけのローカルルール・方言クイズ",
      "明日が急に丸一日休みなら、何する？",
      "暮らしが楽になる『神アプリ』紹介会",
      "最近の『買ってよかった/やや失敗』アイテム",
      "人生で一番刺さった本/漫画/記事を一冊だけ",
      "ちょうどいい『プチ贅沢』の定義を語ろう",
      "学生時代の部活・サークル『あるある』",
      "仕事で『嬉しかった瞬間』（具体的エピソード）",
      "“無理のない範囲で”お酒の失敗談",
      "コンビニ飯の最強カスタムを決める会",
      "自由に10万円使えるなら、どう使う？",
      "鍋/焼肉の“流儀”を語る（網の使い方・締め問題）",
      "朝派？夜派？それぞれの最強ルーティン",
      "スマホのホーム画面見せ合い（アプリ配置のコツ）",
      "ここ1年でいちばん笑った出来事は？",
      "最強の雨の日の過ごし方",
      "最近の写真フォルダから“推しの一枚”紹介",
      "好きな街とその理由（国内/海外）",
      "『もしも同じメンバーで旅に出るなら』行き先は？",
      "たまたま身についた“役に立つ無駄知識”",
      "小さい頃に信じてた勘違い/都市伝説",
      "子どもの頃と今で“変わった口癖”は？",
      "“自分だけの”疲労回復ルール",
      "最近やめてよかった習慣/始めてよかった習慣",
      "これだけは人に勧めたい健康グッズ/ストレッチ",
      "思い出の校歌やCMソング、歌える？",
      "ちょっとしたパーティーゲーム紹介（ルール簡単なもの）",
      "この一年で一番うまかった一皿（写真があればなお良し）",
      "推しのカフェ/喫茶店の楽しみ方",
      "“人生で一度はやってみたい体験”を語る",
      "最近の『気づき』ベスト3（小さくてOK）",
      "もし一週間“現金のみ生活”したらどうする？",
      "逆に“スマホなし生活”なら？",
      "いま欲しい“家電/生活ハック”は？",
      "好きな美術館/水族館/動物園の過ごし方",
      "『また会いたくなる人』の共通点って？"
    ],
    men: [
      "今年“買ってよかった”ガジェット/工具ベスト1",
      "最強のラーメン論争（麺硬さ/油/味の好み）",
      "車・バイク・自転車のこだわりポイント",
      "キャンプ/アウトドア道具の“沼”を語る",
      "仕事のしくじりから学んだ“再発防止ワザ”",
      "健康診断の数値をどう改善した？（無理のない範囲で）",
      "歴代ゲーム機ベスト3と思い出の一本",
      "コスパ最強の酒＆つまみ（家/外で分けてもOK）",
      "ゴルフ・釣り・サウナ、それぞれの“沼ポイント”",
      "筋トレ/ダイエットあるある＆継続コツ",
      "お金の失敗談と学び（具体額は伏せて）",
      "10年前の自分に一言アドバイスするなら？",
      "大人になってから始めて良かった習い事/趣味",
      "腕時計/万年筆/バッグ…“相棒ギア”の話",
      "仕事効率化の裏ワザ（ショートカット/仕組み化）",
      "カラオケ十八番＆盛り上げ方のコツ",
      "旅のこだわり（荷物/宿/移動の最適解）",
      "町中華ベストオーダーを語る",
      "子どもの頃のヒーロー/戦隊/スポーツ選手",
      "もし自分が社長なら“初日にやること”",
      "観戦して震えたスポーツの試合を一つ",
      "“一度は行きたい”大人の遠足プラン",
      "仕事道具の最適化（椅子/モニタ/キーボード等）",
      "最高の朝ごはん/夜食の作り方",
      "時間とお金、どっちが貴重？理由は？",
      "“語り合えるバー/居酒屋”の条件",
      "家の収納・ガレージの工夫、見せられる範囲で",
      "好きな職人技YouTube/ドキュメンタリー",
      "『人生で一番刺さった名言』を語る",
      "失敗料理ベスト（ワースト）とリベンジ方法"
    ]
  };

  const FOLLOWUP_POOL = [
    "それって“いつ・どこで”？",
    "一番刺さったポイントはどこ？",
    "初心者に勧めるなら“一言で”どう言う？",
    "その時の写真やスクショある？",
    "ハマった“きっかけ”は？",
    "真似するなら“最初の一歩”は？",
    "おすすめ“3択”にすると？",
    "それの“意外な落とし穴”は？",
    "次にやるなら何する？"
  ];

  // ====== 状態管理 ======
  let mode = "mixed";
  let deck = [];
  let history = [];

  // ユーティリティ
  const $ = (sel) => document.querySelector(sel);
  const toast = (msg) => {
    const el = $("#toast"); el.textContent = msg; el.classList.add("show");
    setTimeout(()=>el.classList.remove("show"), 1400);
  };
  const shuffle = (arr) => {
    const a = arr.slice();
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  };

  const buildDeck = () => {
    const N = DATA[mode].length;
    deck = shuffle([...Array(N).keys()]);
    updateProgress();
  };

  const updateProgress = () => {
    const total = DATA[mode].length;
    const used = history.filter(h=>h.mode===mode).length;
    $("#progress").textContent = `残り ${Math.max(total - used, 0)} / 全${total}`;
  };

  const pickFollowups = (n=3) => shuffle(FOLLOWUP_POOL).slice(0,n);

  const render = (topicText) => {
    const topic = $("#topic");
    topic.textContent = topicText;
    topic.classList.remove("roll");
    // 次フレームで付け直し、アニメを再生
    requestAnimationFrame(()=>topic.classList.add("roll"));

    const ul = $("#followups");
    ul.innerHTML = "";
    pickFollowups().forEach(q => {
      const li = document.createElement("li");
      li.textContent = "・" + q;
      ul.appendChild(li);
    });
  };

  const pushHistory = (topicText) => {
    history.push({mode, topic: topicText, ts: Date.now()});
    // 画面の履歴にも追加
    const ol = $("#history");
    const li = document.createElement("li");
    const d = new Date();
    const t = d.toLocaleTimeString([], {hour:"2-digit", minute:"2-digit"});
    li.textContent = `[${t}] ${topicText}`;
    ol.prepend(li);
    updateProgress();
    // セッション保存
    sessionStorage.setItem("nm_history", JSON.stringify(history));
  };

  const draw = () => {
    if (deck.length === 0) {
      buildDeck();
      toast("一巡したのでシャッフルしました");
    }
    const idx = deck.pop();
    const topicText = DATA[mode][idx];
    render(topicText);
    pushHistory(topicText);
    $("#modeTag").textContent = (mode==="mixed") ? "男女混合" : "男性のみ";
    if (navigator.vibrate) { navigator.vibrate(12); }
  };

  const copyCurrent = async () => {
    const t = $("#topic").textContent;
    const follow = [...document.querySelectorAll("#followups li")].map(li=>li.textContent).join("\n");
    const text = `【${(mode==="mixed")?"男女混合":"男性のみ"}】\nお題：${t}\n${follow}`;
    try{
      await navigator.clipboard.writeText(text);
      toast("コピーしました");
    }catch(e){
      // クリップボード不可の環境向けフォールバック
      const ta = document.createElement("textarea");
      ta.value = text; document.body.appendChild(ta); ta.select();
      document.execCommand("copy"); document.body.removeChild(ta);
      toast("コピーしました");
    }
  };

  const resetAll = () => {
    buildDeck();
    $("#history").innerHTML = "";
    history = history.filter(h => h.mode !== mode); // 現在モードの履歴をクリア
    sessionStorage.setItem("nm_history", JSON.stringify(history));
    toast("シャッフルしました");
    updateProgress();
  };

  // イベント設定
  document.querySelectorAll('input[name="mode"]').forEach(r => {
    r.addEventListener("change", (e) => {
      mode = e.target.value;
      $("#modeTag").textContent = (mode==="mixed") ? "男女混合" : "男性のみ";
      buildDeck();
      updateProgress();
      // 現在モードの最初の1枚を自動表示
      draw();
    });
  });
  $("#nextBtn").addEventListener("click", draw);
  $("#copyBtn").addEventListener("click", copyCurrent);
  $("#resetBtn").addEventListener("click", resetAll);

  // 復元 & 初期表示
  (function init(){
    try {
      const saved = sessionStorage.getItem("nm_history");
      if (saved) {
        history = JSON.parse(saved) || [];
      }
    } catch(_) {}
    buildDeck();
    draw();
  })();
</script>
</body>
</html>
"""
with open("/mnt/data/nomikai-topic-app.html", "w", encoding="utf-8") as f:
    f.write(content)
"/mnt/data/nomikai-topic-app.html"
